services:
  smart-watering-be:
    image: telemetry-bridge:latest
    container_name: telemetry-bridge
    restart: unless-stopped

    ports:
      # expose your app externally (change left side if you want)
      - "8080:8080"

    environment:
      # Spring Boot
      SERVER_PORT: "8080"
      SPRING_PROFILES_ACTIVE: "docker"

      # Kafka (remote)
      SPRING_CLOUD_STREAM_KAFKA_BINDER_BROKERS: "${KAFKA_BROKERS}"

      # MQTT (remote)
      APP_MQTT_HOST: "${MQTT_HOST}"
      APP_MQTT_PORT: "${MQTT_PORT}"
      APP_MQTT_USERNAME: "${MQTT_USERNAME}"
      APP_MQTT_PASSWORD: "${MQTT_PASSWORD}"

      # optional (if your app uses it)
      APP_MQTT_CLIENT_ID: "${MQTT_CLIENT_ID:-smart-watering-be}"
      APP_MQTT_SSL_ENABLED: "${MQTT_SSL_ENABLED:-false}"

    # Optional: if the remote services are not reachable without brokerUri DNS
    # dns:
    #   - 1.1.1.1
    #   - 8.8.8.8
